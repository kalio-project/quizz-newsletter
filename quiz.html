<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hugo Décrypte - Quiz</title>
    <style>
        :root { --navy: #151a2e; --red: #e63946; --bg: #f4f7f6; }
        body { font-family: 'Inter', sans-serif; background: var(--bg); margin: 0; padding: 0; }
        
        /* Header Hugo */
        .hugo-header { background: var(--navy); color: white; padding: 20px; text-align: center; border-bottom: 4px solid var(--red); }
        
        /* Contenu Newsletter */
        #hugo-view { background: white; max-width: 800px; margin: 0 auto; padding: 20px; box-shadow: 0 0 20px rgba(0,0,0,0.05); }
        #hugo-view img { max-width: 100%; height: auto; border-radius: 8px; }

        /* Section Quiz */
        .quiz-container { max-width: 760px; margin: 40px auto; padding: 20px; }
        .quiz-title { border-left: 5px solid var(--red); padding-left: 15px; color: var(--navy); margin-bottom: 30px; }
        
        .q-card { background: white; padding: 25px; border-radius: 12px; margin-bottom: 20px; box-shadow: 0 4px 10px rgba(0,0,0,0.05); }
        
        button { 
            display: block; width: 100%; text-align: left; padding: 15px; margin: 10px 0; 
            border: 1px solid #eee; border-radius: 8px; background: #fff; cursor: pointer; font-size: 1em; transition: 0.2s;
        }
        button:hover { border-color: var(--navy); background: #f8f9ff; }
        
        .result { display: none; margin-top: 15px; padding: 15px; border-radius: 8px; font-weight: 500; line-height: 1.5; }
        .correct { background: #d4edda; color: #155724; border-left: 5px solid #28a745; }
        .wrong { background: #f8d7da; color: #721c24; border-left: 5px solid var(--red); }
    </style>
</head>
<body>
    <div class="hugo-header"><h2>HUGO DÉCRYPTE</h2></div>

    <div id="hugo-view"></div>

    <div class="quiz-container">
        <h2 class="quiz-title">LE QUIZ DU JOUR</h2>
        <div id="quiz-content"></div>
    </div>

    <script>
        const file = new URLSearchParams(window.location.search).get('file');
        fetch(file).then(r => r.json()).then(data => {
            document.getElementById('hugo-view').innerHTML = data.html_affichage;
            
            const container = document.getElementById('quiz-content');
            data.questions.forEach((q, i) => {
                const div = document.createElement('div');
                div.className = 'q-card';
                div.innerHTML = `
                    <p><strong>${i+1}. ${q.q}</strong></p>
                    ${q.options.map((opt, idx) => `<button onclick="answer(${i}, ${idx}, ${q.correct})">${opt}</button>`).join('')}
                    <div id="res-${i}" class="result"><strong>Explication :</strong> ${q.explication}</div>
                `;
                container.appendChild(div);
            });
        });

        function answer(qIdx, choice, correct) {
            const res = document.getElementById(`res-${qIdx}`);
            res.style.display = "block";
            res.className = "result " + (choice === correct ? "correct" : "wrong");
        }
    </script>
</body>
</html>
